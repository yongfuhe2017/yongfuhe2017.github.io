---
category: books
published: false
layout: post
title: book-6. 推荐系统实践
description: 仅仅是记录我个人的读书记录，看官不必在意～
---


## 
## 1. 好的推荐系统
　　
### 1.1 什么是推荐系统
　　推荐系统的前提，都是信息过载。在信息过载的时代，信息消费者和信息生产着都面临问题：信息消费者如何从大量信息中找到自己感兴趣的；信息生产者如何让自己生产的信息脱颖而出。   
　　从物品的角度出发，推荐系统可以更好滴发掘物品的肠胃。《长尾理论》一书指出，传统的8/2原则(80%的销售额来源于20%的热门品牌)在互联网的加入下会受到挑战。   
　　本书对推荐系统的分类：

- 社会化推荐：让好友给自己推荐物品；
- 基于内容的推荐：大多有基于物品的推荐，该算法给用户推荐那些和他们之前系统的物品相似程度较高的物品。
- 协同过滤：就是借鉴和你相关人群的观点来进行推荐，很好理解。

### 1.2 个性化推荐系统的用用
　　和搜索引擎不同，个性化推荐系统需要依赖用户的行为数据。大部分推荐系统都是由前台的展示页面，后台的日志系统和推荐算法系统构成。   
　　推荐系统算法的结果：

- 推荐结果属性；
- 推荐结果的评分；
- 推荐理由；
- 用户反馈；

　　在电商网站中，推荐系统最重要的应用就是打包销售。

### 1.3 推荐系统评测
　　一个完整的推荐系统一般存在3个参与方：用户，物品提供者和提供推荐系统的网站。在评测一个推荐算法时，需要同时考虑三个方面的利益，一个好的推荐系统是能够令三方共赢的系统。   
　　预测准确度是推荐系统领域的重要指标。但是，很多研究表明，准确的预测并不代表好的推荐。比如，推荐系统预测明天太阳会从东方升起，虽然准确率是100%，却是一个没有意义的预测。   
　　好的推荐系统不仅仅能够准确预测用户的行为，而且能够扩展用户的视野，帮助用户发现那些他们可能会感兴趣，但却不那么容易发现的东西。同时，推荐系统还要能够帮助商家将那些埋没在长尾中的好商品介绍给可能会对他们感兴趣的用户。这也正是《长尾理论》的作者在书中不遗余力介绍推荐系统的原因。   
　　为了全面评测推荐系统对三方利益的影响，本章从不同角度出发，提出不同的指标，这些指标包括：准确度，覆盖度，新颖度，惊喜度，信任度，透明度等。

### 1.4 推荐系统实验方法
　　在推荐系统中，主要有三种评测效果的实验方法：离线实验，用户调查和在线实验：

- 离线实验：
    + 通过日志系统获取用户行为数据；
    + 将数据集按照一定的规则分成训练集和测试集[可以cross validate]；
    + 在训练集上训练用户兴趣模型，在测试集上进行预测；
    + 通过实现定义的离线指标评测算法在测试集上的预测结果；
- 离线实验优缺：
    + 优：不需要对实际系统的控制权；
    + 优：不需要用户参与实验；
    + 优：速度快，可测试大量算法；
    + 缺：无法计算商业上关心的指标，点击率，转化率等；
    + 缺：离线实验的指标和商业指标存在差距；

- 用户调查
- 在线实验：
    + 即做AB测试：一种在线评测算法的实验方法，通过一定的规则将用户随机分成几组，并对不同组的用户采用不同的算法，然后通过统计不同组用户的不同的评测指标比较不同算法；
- 在线实验优缺：
    + 优：可以公平获得不同算法实际在线时的性能指标，包括商业上关注的指标；
    + 缺：周期长，因此不会AB测试所有算法，只会AB测试在离线实验和用户调查中表现很好的算法。

　　AB测试系统，用户进入网站后，流量分配系统决定用户是否需要被进行AB测试，如果需要的话，流量分配系统会给用户打上在测试中的分组标签。然后用户在浏览网页的过程中，行为会通过日志系统统计后发回后台的日志数据库，如果用户用测试分组标签，该标签也会发回后台数据库。

![ab-test.jpg](../images/ab-test.jpg)

### 1.5 评测指标

- 用户满意度：没有办法离线计算，只能通过用户调查或在在线实验获得。不过，现在有很多推荐系统都有反馈的功能，用户可以反馈推荐结果，可以时常对推荐系统进行更新。   
- 预测准确度：由于离线的推荐算法有不同的研究方向，因此下面将针对不同的研究方向介绍他们的预测准确度指标。
    + 评分预测：用户可以对推荐的图片打分，如果知道用户对物品的历史评分，就可以从中学习用户的兴趣模型，并预测该用户在将来看到一个他没有评过分的物品时，会给这个物品评多少分。预测用户对物品评分的行为称为评分预测；     
    评分预测的准确度一般通过均方根误差(RMSE)和评价绝对误差(MAE)计算，对于测试集中一个用户u和物品i，Rui是用户u对物品i的实际评分，Pui是推荐系统给出的预测评分，那么RMSE定义为：    
![rmse-mae.jpg](../images/rmse-mae.jpg)
    + TopN推荐：网站在提供推荐服务时，一般是给用户一个个性化的推荐列表，这叫做TopN推荐。TopN推荐的预测准确率一般通过准确率、召回率度量。      
    令R(u)是根据用户在训练集上的行为给用户作出的推荐列表，而T(u)是用户在测试集上的行为列表，那么，推荐结果的召回率定义如下：    
![recall.jpg](../images/recall.jpg)    
    为了全面评测TopN推荐的准确率和召回率，一般会选取不同的推荐列表长度，计算出一组准确率召回率曲线。            
    + 覆盖率：覆盖率描述一个推荐系统对物品长尾的发掘能力。定义为推荐出来的物品占总物品集合的比例。假设系统的用户集合为U，推荐给每个用户的一个长度为N的物品列表R(u)，那么覆盖率定义为：   
![coverage.jpg](../images/coverage.jpg)
    上面公式表示，覆盖率为100%的系统可以将每个物品都推荐给至少一个用户。但是上面的定义过于粗略，覆盖率为100%的系统可以有无数的物品流行分布。实际上如果所有的物品都出现在推荐列表中，且出现的次数差不多，那么推荐系统挖掘长尾的能力就很好。     
    因此，可以通过研究物品在推荐列表中出现次数的分布描述推荐系统挖掘长尾的能力，如果这个分布较平，那么说明推荐系统覆盖率较高；而如果这个分布较陡峭，说明覆盖率较低。在信息论和经济学中有两个指标可以来定义覆盖度。第一个是信息熵：  
![coverage1.jpg](../images/coverage1.jpg)
    + 多样性：推荐列表需要能覆盖用户不同的兴趣领域，即推荐的结果需要有多样性。多样性描述了推荐列表中物品两两之间的不相似性。假设S(i,j)在区间[0,1]，定义为物品i和j之间的相似度，那么用户u的推荐列表R(u)的多样性定义如下：  
![varitey.jpg](../images/varitey.jpg)
    而推荐系统的整体多样性可以定义为所有用户推荐列表多样性的平均值： 
![diversity.jpg](../images/diversity.jpg)
    + 新颖性：





## n. 相关资料

- ResysChina 推荐系统大会
- [The Youtube Video Recommendation System](http://dl.acm.org/citation. cfm?id=1864770)















## 扫一扫     

![2015-04-03-recommend-system.md](../../images/share/2015-04-03-recommend-system.md.jpg)